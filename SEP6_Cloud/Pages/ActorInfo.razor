@page "/actorInfo/{actorId:int}"
@using SEP6_Cloud.Components
@using SEP6_Cloud.Models
@using SEP6_Cloud.Serivces
@inject IMovieService MovieService

<h3>Actor Info</h3>

<div style="padding:10px">
    <Card Hoverable Style="width:200px">
            <Cover>
				<img alt="@(Actor.Name)" src="https://image.tmdb.org/t/p/w185@(Actor.Profile)" />
            </Cover>
			<ChildContent>
                <CardMeta Title="@(Actor.Name)"/>
			</ChildContent>
        </Card>
</div>
<div>
<AntList Grid="grid" DataSource="@Movies">
    <ListItem >
        <Card Bordered Title="@(context.Title)" Style="width:200px">
            <Extra>
                <Button Icon="@IconType.Outline.More" OnClick="@(()=>onCardClick(context))"/>
            </Extra>
			<Cover><img alt="@(context.Title)" src="https://image.tmdb.org/t/p/w185/@(context.Poster)" /></Cover>
            <Body>
            @(context.Description)
            </Body>
        </Card>
    </ListItem>
</AntList>
</div>
@if (_visible)
{
    <ModalInfo />   
}

@code {
    [Parameter]
    public int? actorId { get; set; }
    ActorData Actor = new ActorData();
    public List<MovieData> Movies = new List<MovieData>();
    bool _visible = false;

    protected override async Task OnInitializedAsync()
    {
        var id = actorId ?? 0;
        Actor = await MovieService.GetActor(id);
        Movies = await MovieService.GetMovieListByActor(id);
    }

    private ListGridType grid = new()
    {
        Gutter = 16,
        Xs = 1,
        Sm = 2,
        Md = 3,
        Lg = 5,
        Xl = 5,
        Xxl = 5,
    };

    async Task onCardClick(MovieData movie)
    {

        MovieService.SetMovie(movie.Id);
        _visible = true;
    }


}
